## 9. 정렬 - ORDER BY

> SELECT 열명 FROM 테이블명 [WHERE 조건식] ORDER BY 열명 [ASC || DESC]

- ORDER BY 구를 사용하여 검색결과의 행 순서를 정렬(sort)하여 반환함. 단, 저장장치에 저장된 데이터의 행 순서를 변경하는 것은 아님.

- 수치형과 날짜시간형 데이터는 숫자 크기로 대소관계 판별하나, 문자열형 데이터는 **사전식 순서**에 의해 결정됨.

## 10. 복수의 열을 지정해 정렬하기

> SELECT 열명 FROM 테이블명 [WHERE 조건식] ORDER BY 열명1 [ASC || DESC], 열명2 [ASC || DESC] ...

- 콤마로 열명을 구분해 복수로 열을 지정할 수 있음.

- 정렬 순서는 지정한 열명의 순서를 따름.

- 값이 같아 순서를 결정할 수 없는 경우 당므으로 지정한 열명을 기준으로 정렬됨.

- **NULL** 값의 정렬 순서
  - '특정 값보다 큰 값' 혹은 '특정 값보다 작은 값', 둘 중 하나의 방법으로 대소를 비교함. MySQL 기준 **NULL** 값을 가장 작은 값으로 취급

## 11. 결과 행 제한하기 - LIMIT

> SELECT 열명 FROM 테이블명 [ORDER BY 열명] LIMIT 행수 [OFFSET 시작행]

- LIMIT 구로 결괏값으로 반환될 행의 수를 제한

- LIMIT 구는 SELECT 명령의 마지막에 지정하는 것으로 WHERE 구나 ORDER BY 구의 뒤에 지정함.

- WHERE 구로 검색한 후 ORDER BY로 정렬된 뒤 최종적으로 처리됨.

- LIMIT는 표준 SQL이 아니므로 MySQL과 PostgreSQL 이외의 DB에서는 사용 불가. SQL Server에서는 비슷한 기능으로 TOP이, 오라클에는 ROWNUM이 있음.

- LIMIT 구에 OFFSET 지정을 통해 결괏값으로부터 데이터를 취득할 위치를 가리킬 수 있음. 생략시 기본값은 0.

## 12. 수치 연산

> SELECT 식1 [[AS] 별명], 식2 [[AS] 별명] ... FROM 테이블명

- SQL은 DB를 조작하는 언어지만, 컴퓨터를 조작하는 언어이기도 하므로 기본적으로 계산 기능을 포함함.

- 산술 연산자 : + - \* / %

- 연산자 우선순위가 높은 순으로, 같다면 왼쪽에서 오른쪽 순서로 연산 진행.

- 이름에 ASCII 문자 이외의 것을 포함할 경우 더블쿼트로 둘러싸서 지정.
- 더블쿼트로 둘러싸면 명령구문을 분석할 때 DB 객체의 이름이라고 간주. 단, 싱글쿼트로 둘러싸는 것은 문자열 상수임.
- 더블쿼트로 둘러싸면 예약어와 같은 이름도 사용 가능.

- 이름을 지정하는 경우 숫자로 시작되지 않도록 주의.

- SELECT 구에서 지정한 별명은 WHERE 구 안에서 사용할 수 없음.

  - WHERE 구 -> SELECT 구의 순서로 처리가 되기 때문.

- ORDER BY는 서버에서 개부적으로 가장 나중에 처리됨.

  - SELECT 구보다 나중에 처리되므로 SELECT 구에서 지정한 별명을 ORDEY BY 구에서 사용 가능

- NULL로 연산하면 결과는 NULL이 됨.

> ROUND(number, 반올림할 자릿수)  
> : 기본적으로 소수점 첫째 자리 기준으로 반올림하는 함수, 음수로 지정해 정수부의 반올림도 가능

## 13. 문자열 연산

> \+ || CONCAT  
> : 문자열 결합. 2개의 열 데이터를 모아서 1개의 열로 처리하고 싶은 경우에 사용.

> SUBSTRING  
> : 문자열의 일부분을 계산해서 반환

> TRIM  
> : 문자열의 앞뒤로 여분의 공백을 제거, 단 중간에 존재하는 공백은 제거되지 않음.

> CHARACTER_LENGTH  
> : 문자열의 길이를 계산하여 반환

> OCTET_LENGTH  
> : 문자열의 길이를 바이트 단위로 계산해 돌려주는 함수  
> 문자열 데이터의 길이는 문자세트에 따라 다름.

## 14. 날짜 연산

- 날짜나 시간 데이터는 수치 데이터와 같이 사칙 연산 가능

- 날짜 데이터는 서식을 지정할 수 있음.

> CURRENT_TIMESTAMP
> : 시스템 날짜(하드웨어 상의 시계로 부터 실시간으로 얻을 수 있는 일시적인 데이터) 확인  
> 인수를 지정할 필요가 없는 괄호를 사용하지 않는 특수한 함수.

## 15. CASE 문으로 데이터 변환하기

> CASE WHEN 조건식1 THEN 식1  
>  [WHEN 조건식2 THEN 식2...]  
> [ELSE 식3]  
> END

- 임의의 조건에 따라 독자적으로 변환 처리를 지정해 데이터를 변환하고 싶은 경우 CASE 문 사용.

- WHEN 절에서 참과 거짓을 반환하는 조건식 서술
- 해당 조건이 만족하여 참이 되는 경우 THEN 절에 기술한 식이 처리됨.
- 그 어떤 조건식도 만족치 못한 경우 ELSE 절에 기술한 식이 채택됨. 이때 ELSE는 생략 가능하며 그 경우 'ELSE NULL'로 간주

(Ex)

- CASE로 NULL 값을 0으로 반환하기

  > SELECT a, CASE WHEN a IS NULL THEN 0 ELSE a END "a(null=0)" FROM sampleTable
  > SELECT a, COALESCE(a, 0) FROM sampleTable

  > COALESCE : 주어진 인수 가운데 NULL이 아닌 값에 대해서 가장 먼저 지정된 인수의 값을 반환.

- 디코드 : 문자화 / 인코드 : 수치화

- 검색 CASE : 'CASE WHEN 조건식 THEN 식 ...'

- 단순 CASE : 'CASE 식 WHEN 식 THEN 식 ...

  - > CASE 식1  
    > WHEN 식2 THEN 식3  
    > [WHEN 식4 THEN 식5 ...]  
    > [ELSE 식6]  
    > END
  - 식1의 값이 WHEN의 식2 값과 동일한지 비교하고 값이 같다면 식3의 값이 CASE 문 전체의 결괏값이 됨. 비교 결과 일치하는 WHEN 절이 하나도 없는 경우에는 ELSE 절이 적용됨.

- CASE 문의 ELSE는를 생략하면 ELSE NULL이 되므로, ELSE는 생략하지 않는 편이 나음.

- 단순 CASE 문으로는 NULL 값을 비교할 수 없음.
