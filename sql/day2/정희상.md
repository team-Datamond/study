# 5월 20일 75p~150p

### 7강 조건 조합하기

- 논리연산자
  AND, OR, NOT

  - AND와 OR를 사용할 경우 주의할 점
    연산자의 우선 순위를 알아야한다.

    - AND는 OR에 비해 우선 순위가 높다!
    - 조건이 잘못 지정되는 것을 미연에 방지할 수 있도록 OR 조건식은 괄호로 묶어 지정하는 경우가 많다.

  - NOT
    - 오른쪽에만 항목을 지정하는 '단항 연산자'로 이에 포함되지 않는 그 나머지 부분을 결과로서 반환한다.

### 8강 패턴 매칭에 의한 검색

- 'LIKE' 술어
  '부분 검색'을 할 수 있다.

  - 연산자로 검색하는 경우 셀의 데이터 값이 완전히 동일한지를 비교한다.
  - '특정 문자나 문자열이 포함되어 있는지를 검색하고 싶은' 경우 사용하는 방법으로 '패턴 매칭' 또는 '부분 검색'이라고 한다.

  - 메타문자
    - '임의의 문자 또는 문자열'에 매치하는 부분을 지정하기 위해 쓰이는 특수 문자이다.
    - %, \_ 가 있다
    - '\*'는 LIKE에서 사용 불가하다

  * LIKE로 % 검색하기

    - \를 앞에 붙여주면 된다.
    - '이스케이프'라고 한다.

  * 문자열 상수 '의 이스케이프
    - 표준 SQL에서 '를 두개 연속해서 기술하는 것으로 이스케이프 처리를 할 수 있다.
    - ex) 'It's'라는 문자열에서 문자열 상수로 표기하면 'It''s'로 쓴다.
    - ex) ' 하나를 출력하기 위해서는 ''''로 쓴다.

### 9강 정렬 - ORDER BY

ORDER BY '열명' DESC (오름차순)
ORDER BY '열명' ASC (내림차순))

- 수치형 데이터, 날짜시간형 데이터는 숫자 크기로 판별
- 문자열형 데이터는 사전식 순서에 의해 결정

* 수치형과 문자열형 데이터는 대소관계의 계산 방법이 다르다.

  - 문자열형에 숫자로 데이터가 포함되어 있을 경우
    p.100 참고

* ORDER BY는 테이블에 영향을 주지 않는다.

### 10강 복수의 열을 지정해 정렬하기

SELECT '열명' FROM '테이블명' WHERE '조건식'
ORDER BY '열명1' [ASC|DESC], '열명2' [ASC|DESC] ...

- '열'의 순서를 바꿀 경우 결과 값은 달라진다.

- 복수 열을 지정하는 경우에도 정렬방법을 생략하면 기본값은 ASC가 되지만 데이터베이스 제품에 따라 기본값을 변경할 수 있기 때문에 주의가 필요하다.
- 문장의 가독성을 높이기 위해서라도 가능한 정렬방법을 생략하지 많고 지정하도락 하자

* NULL 값의 정렬순서

  - NULL에 대한 대소비교 방법은 표준 SQL에도 규정되어 있지 않아 데이터베이스 제품에 따라 기준이 다르다.

  - MySQL의 경우 NULL을 가장 작은 값으로 취급해 오름차순에서는 가장 먼저, 내림차순에서는 가장 나중에 표시한다.

### 11강 결과 행 제한하기 - LIMIT

SELECT '열명' FROM '테이블명' WHERE '조건식' ORDER BY '열명' LIMIT '행수' [OFFSET 시작행]

- OFFSET의 시작할 행은 '시작할 행 - 1'로 기억하면 편하다.
  ex) 1행부터 시작이면 0, 4행부터 시작하면 3

### 12강 수치 연산

'+ - \* / % MOD'

- 연산자의 우선순위

  - 1순위 \* / % 2순위 + -

- SELECT 구로 금액 계산하기
  SELECT _, '열명' _ '열명' FROM '테이블명';

- 열의 별명
  SELECT _, '열명' _ '열명' AS '별명' FROM '테이블명';

* 이름에 ASCII 문자 이외의 것을 포함할 경우는 더블쿼트로 둘러싸서 지정한다
  SELECT '열명' \* '열명' "별명" FROM '테이블명';
  - 예약어와 숫자로 시작하는 이름도 더블쿼트로 해결 가능
  - 하지만 숫자로 시작한다면 그것이 수치형 상수를 의미하는 것인지 데이터베이스 객체명을 의미하는 것인지 구별이 불가하여 객체명은 '숫자로 시작해서는 안 된다'라는 제약이 생겼다.

- WHERE 구에서 연산하기
  ex) SELECT _, price _ quantity AS amount FROM sample34
  WHERE price \* quantity >= 2000;

  - 하지만
    SELECT _, price _ quantity AS amount FROM sample34
    WHERE amount>= 2000;
    는 에러가 발생한다.
    - WHERE 구와 SELECT 구의 내부처리 순서
      WHERE 구 -> SELECT 구의 순서로 처리되기 때문에 SELECT에서 사용한 별칭은 WHERE 구에서는 내부적으로 지정되지 않은 상태가 되어 에러가 발생한다.

  * NULL 값의 연산

    - NULL은 0으로 처리되지 않고 NULL 그 자체로 받아들이기 때문에 연산을 했을 때도 결과는 NULL이다.

  * ORDER BY 구에서 연산하기
    ex) SELECT _, price _ quantity AS amount FROM sample34 ORDER BY amount DESC;

  - 내부처리 순서
    WHERE 구 -> SELECT 구 -> ORDER BY 구
    ORDER BY 구에서는 SELECT 구에서 지정한 별명을 사용할 수 있다.

  * 함수
    함수면 (인수1, 인수2...)

    MOD 함수 - 나머지값을 반환
    ROUND 함수 - 반올림 - ex) ROUND(amount, 1) 반올림 자리수 지정 가능 -3(100단위), -2(10단위), -1(1단위), 0(소수점 첫째 자리), 1(소수점 둘째 자리)

### 13강 문자열 연산

- '문자열' || '문자열' -> '문자열'

- CONCAT 함수를 이용하여 수치 데이터와 문자열 형도 결합 가능
  ex) SELECT CONCAT(quantity, unit) FROM sample35;

- SUBSTRING 함수는 문자열의 일부분을 계산해서 반환
  ex) SUBSTRING('20140125001', 1, 4) -> '2014'
  SUBSTRING('20140125001', 5, 2) -> '01'

- CHARACTER_LENGTH 함수는 문자열의 길이를 계산해 돌려주는 함수

### 14강 날짜 연산

- CURRENT_TIMESTAMP: 실행했을 때를 기준으로 시간을 표시
  함수임에도 인수를 필요로 하지 않는다.
- TO_DATE('2014/01/25', 'YYYY/MM/DD') 문자열 데이터를 날짜형 데이터로 변환

- 날짜의 덧셈과 뺄셈
  ex) SELECT CURRENT_DATE + INTERVAL 1 DAY'

  특정일로부터 1일 후를 계산

- CURRENT_DATE는 시스템 날짜의 날짜만 확인하는 함수

- 날짜형 간의 뺄셈
  DATADIFF('2014-02-28', '2014-01-01')로 MySQL에서 계산 가능

### 15강 CASE 문으로 데이터 변환하기

CASE WHEN '조건식1' THEN '식1'
WHEN '조건식2 THEN '식2'...
ELSE '식3'
END
