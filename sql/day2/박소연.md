# 7강 조건 조합하기

## 1. AND로 조합하기

-   좌우의 식이 모두 참일 경우 참을 반환 (그리고)

## 2. OR로 조합하기

-   좌우 어느 한쪽이든 참인 경우 참을 반환 (또는)

## 3. AND와 OR를 사용할 경우 주의할 점

-   AND와 OR 좌우에는 항상 조건식이 오도록, 상수가 오면 참을 의미함
-   AND가 OR 보다 우선순위가 높음, AND는 논리곱을 OR는 논리합을 의미하기 때문

## 4. NOT으로 조합

-   단항 연산자
-   오른쪽에 오는 조건식의 부정을 반환

# 8강 패턴 매칭에 의한 검색

## 1. LIKE로 패턴 매칭하기

-   LIKE 술어를 통해 패턴 매칭으로 검색 가능
-   LIKE에서 사용할 수 있는 메타문자 => % 또는 \_
-   % : 임의의 문자열 (0개 이상의 문자열)
-   \_ : 임의의 문자 하나를 의미
-   패턴 정의시 여러개의 메타문자를 사용할 수 있다.

## 2. LIKE로 %를 검색하기

-   %, \_를 검색하고자 할때는 이스케이프문자를 앞에 붙이면 된다.
-   ex) '\\%', '\\\_'

## 3. 문자열 상수 '의 이스케이프

-   문자열에서 '을 검색하고자 할때는 '을 두번 연속으로 기술한다.
-   ex) It's 를 검색 -> 'It''s'

# 9강 정렬 - ORDER BY

## 1. ORDER BY로 검색 결과 정렬하기

-   가장 마지막에 지정
-   지정한 열의 값을 기준으로 조회된 데이터를 정렬

## 2. ORDER BY DESC로 내림차순으로 정렬하기

-   내림차순(DESC), 오름차순(ASC)
-   생략 시 ASC가 기본으로 정렬

## 3. 대소관계

-   수치형: 숫자크기로 판별
-   날짜시간형: 과거일수록 작음을 의미, 최신일수록 크다고 판별
-   문자열형: 사전식 순서로 판별

## 4. ORDER BY는 테이블에 영향을 주지 않는다.

-   실제 저장 장치에 영향을 주는 것이 아니라 데이터 조회 시 결과를 정렬하는 것뿐임

# 10강 복수의 열을 지정해 정렬하기

## 1. 복수 열로 정렬 지정

-   매번 ORDER BY를 지정해줌으로써 매번 같은 데이터를 조회할 수 있다.
-   지정하지 않은 열은 정렬되지 않고 조회됨
-   ORDER BY로 복수 열 지정이 가능
-   복수로 지정시 지정한 순서가 먼저일수록 우선시 정렬됨

## 2. 정렬방법 지정하기

-   다음과 같이 열마다 정렬조건을 지정해줄 수 있음
-   ORDER BY 열명1 [ASC|DESC], 열명2 [ASC|DESC]

## 3. NULL 값의 정렬순서

-   데이터베이스 제품에 따라 기준이 다르며 가장 먼저 또는 가장 마지막에 조회됨
-   MySQL의 경우 가장 작은 값으로 취급한다.
-   Oracle의 경우 가장 큰값으로 취급한다.

# 11강 결과 행 제한하기 - LIMIT

## 1. 행수 제한

-   LIMIT 구는 표준 SQL이 아님
-   최대 행수를 수치로 지정
-   ORDER BY 구 실행으로 정렬 후 행수를 제한한다.
-   MySQL, PostgreSQL: LIMIT
-   SQL Server: TOP
-   Oracle: ROWNUM
-   ROWNUM은 WHERE구로 지정하므로 정렬하기 전에 처리되어 LIMIT로 행을 제한할 경우와 결과값이 다름

## 2. 오프셋 지정

-   LIMIT 구의 기본 OFFSET은 0
-   OFFSET 뒤에 오는 숫자 다음 번째의 데이터부터 조회

# 12강 수치 연산

## 1. 사칙연산

-   산술 연산자를 통해 연산가능
-   우선순위: 1. \* / % , 2. + - (우선순위가 같다면 왼쪽부터 연산)

## 2. SELECT 구로 연산하기

-   SELECT 구에 열명을 통해 연산가능
-   ex) SELECT point \* select from mission

## 3. 열의 별명

-   SELECT 구에서 식에 별명 붙이기 가능
-   별명에 ASCII 문자 이외의 것을 포함할 경우 ""로 둘러 지정
-   "": 데이터베이스 객체의 이름
-   '': 문자열 상수
-   MySQL의 경우 숫자로 시작시 객체이름으로 간주
-   다음과 같이 식이 의미하는 바를 더 쉽게 알 수 있음
-   ex) SELECT point \* select AS total from mission

## 4. WHERE 구에서 연산하기

-   다음은 포인트와 채택인원의 곱이 1000 이상인 값을 검색한다.
-   ex) SELECT _ from mission where point _ select >= 1000

## 5. NULL 값의 연산

-   NULL과 연산 시 모두 NULL

## 6. ORDER BY 구에서 연산하기

-   ORDER BY 구는 나중에 실행되기 때문에 SELECT 구의 별명을 사용하는 것도 가능하고 연산 후의 값으로 정렬도 가능하다.

## 7. 함수

-   문법: 함수명 (인수1, 인수2...)
-   함수 == 연산자 ㅇㅇ

## 8. ROUND 함수

-   반올림 함수
-   반올림 자릿수 지정: 기본으로 소수점 첫째 자리를 기준
-   두번째 인수로 자릿수를 지정할 수 있다. ex) ROUND(amount, 1), 소수점 둘째 자리에서 반올림
-   두번째 인수가 -1은 1의단위에서 반올림, -2는 10의단위에서 반올림

# 13강 문자열 연산

-   문자열 연산: + || CONCAT SUBSTRING TRIM CHARACTER_LENGTH

## 1. 문자열 결합

-   ||, +, CONCAT 을 사용
-   ex) 'ABC' || '1234' -> 'ABC1234'
-   ex) CONCAT(열명1, 열명2) 을 통해 '열명1열명2' 가능

## 2. SUBSTRING 함수

-   문자열의 일부분을 계산해서 반환하는 함수
-   데이터베이스에 따라 SUBSTR 인 경우도 있음
-   ex) 앞 4자리(년) 추출 -> SUBSTRING('20220519', 1, 4) -> '2022'
-   ex) 앞에서 다섯째자리부터 2자리 추출 -> SUBSTRING('20220519', 5, 2) -> '05'

## 3. TRIM 함수

-   문자열의 앞뒤로 여분의 스페이스가 있을 경우 이를 제거해주는 함수
-   문자열 도중 스페이스는 제거되지 않음
-   ex) TRIM('ABC ') -> 'ABC'

## 4. CHARACTER_LENGTH 함수

-   문자열의 길이를 계산해 반환하는 함수
-   OCTET_LENGTH 함수: 문자열의 길이를 바이트 단위로 계산해 반환하는 함수
-   문자세트(character set): 반각문자, 전각문자
-   한 문자가 몇바이트인지는 쓰이는 문자세트에 따라 다르다.

# 14강 날짜 연산

## 1. SQL에서의 날짜

-   사칙연산 가능
-   시스템 날짜: 'CURRENT_TIMESTAMP'를 통해 실행했을 때를 기준으로 시간을 표시
-   날짜 서식: 국가별로 다름
-   TO_DATE('2022/05/19', 'YYYY/MM/DD')

## 2. 날짜의 덧셈과 뺄셈

-   날짜형 간의 뺄셈: 두 날짜 사이의 차이

# 15강 CASE 문으로 데이터 변환하기

## 1. CASE 문

> CASE WHEN 조건식1 THEN 식1  
> [WHEN 조건식2 THEN 식2 ...]  
> [ELSE 식3]  
> END

-   WHEN 절에는 참과 거짓을 반환하는 조건식을 기술
-   COALESCE(a, 0) -> a가 null값이면 0을, null값이 아니면 a를 출력

## 2. 또 하나의 CASE 문

-   검색 CASE

    > SELECT a AS "코드",  
    > CASE  
    >  WHEN a = 1 THEN '남자'  
    >  WHEN a = 2 THEN '여자'  
    >  ELSE '미지정'  
    > END AS "성별" FROM sample37;

-   단순 CASE
    > SELECT a AS "코드",  
    > CASE a  
    >  WHEN 1 THEN '남자'  
    >  WHEN 2 THEN '여자'  
    >  ELSE '미지정'  
    > END AS "성별" FROM sample37;

## 3. CASE를 사용할 경우 주의 사항

-   CASE문은 어디든 사용가능
-   ELSE 생략가능하나 권장하지 않음
-   단순 CASE 문으로는 NULL 값을 비교할 수 없다
-   DECODE NVL: CASE 문과 같은 Oracle 내장 함수

# 추가 스터디

### 조건절에서 IN에 대해서

-   괄호안에 콤마로 구분하여 해당 열에 다수의 조건을 비교 가능
-   복수를 지정할 수 있어 이 중 하나라도 참이면 참을 반환
-   OR 보다 코드가 간결해짐
-   ex) OR로 작성: WHERE age = 20 OR age = 22, IN으로 작성: WHERE age in (20, 22);

### ORDER BY 구를 가장 마지막에 쓰는 이유

-   SELECT 실행 시 각 구의 실행하는 순서가 있으며 가장 마지막에 실행되는 구가 ORDER BY가 된다.
-   [SELECT절 실행순서](https://moonhy7.tistory.com/m/entry/Database-14-SELECT-%EA%B5%AC%EC%A0%88)
