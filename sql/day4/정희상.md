### 25강 데이터베이스 객체

# 데이터베이스 객체

    - 데이터베이스 객체란 테이블이나 뷰, 인덱스 등 데이터베이스내에 정의하는 모든 것을 일컽는 말이다.
      * 객체란 데이터베이스 내에 실체를 가지는 어떤 것
    - 객체는 이름을 가진다.
      * 이름을 붙일 때의 제약 사항(명명규칙)
        - 기존 이름이나 예약어와 중복하지 않는다.
        - 숫자로 시작할 수 없다.
        - 언더스코어(_) 이외의 기호는 사용할 수 없다.
        - 한글을 사용할 때는 더블쿼트(MySQL에서의 백쿼트)로 둘러싼다.
        - 시스템이 허용하는 길이를 초과하지 않는다.
      * 의미없는 이름을 붙이지 않도록 한다!

# 스키마

    - 데이터베이스 객체는 '스키마'라는 그릇 안에 만들어진다.
    - 따라서 객체의 이름이 같아도 스키마가 서로 다르면 상관없다.
    - 스키마는 SQL 명령의 DDL을 이용하여 정의한다.

      * 테이블과 스키마는 무엇인가를 담는 그릇 역할을 한다는 점에서 비슷하다.
      * 테이블 안에는 열을 정의할 수 있고 스키마 안에는 테이블을 정의할 수 있다.
        - 각각의 그릇 안에서는 중복하지 않도록 이름을 지정한다.
        * 이처럼 이름이 충돌하지 않도록 기능하는 그릇을 '네임스페이스'라고 부른다.

### 26강 테이블 작성, 삭제, 변경

```
  CREATE TABLE '테이블명' (열 정의1, 열정의 2,...)
  DROP TABLE '테이블명'
  ALTER TABLE '테이블명' 하부명령
```

# 테이블 작성

    - 테이블 생성시 기본값을 설정할 때는 DEFAULT로 지정하되 자료형에 맞는 리터럴로 기술한다.
    - 기본값은 생략할 수 있다.

# 테이블 삭제

    - TRUNCATE TABLE '테이블명'
      * 테이블의 모든 행 삭제
      * 모든 행을 삭제할 때는 DELETE 명령으로 처리할 경우 행 단위로 여러 가지 내부처리가 일어나므로 삭제할 행이 많으면 처리속도가 상당히 늦어진다.

# 테이블 변경

    - ALTER TABLE '테이블명' '변경명령'
      * 열을 추가할 때는 ADD 하부명령으로 실행
        - ALTER TABLE '테이블명' ADD '열 정의'
          - ALTER TABLE ADD로 열을 추가할 때, 기존 데이터행이 존재하면 추가한 열의 값이 모두 NULL이 된다.
           * 물론 기본값이 지정되어 있으면 기본값으로 데이터가 저장된다.
          - NOT NULL 제약을 붙인 열을 추가하고 싶다면 먼저 NOT NULL로 제약을 건 뒤에 NULL 이외의 값으로 기본값을 지정할 필요가 있다.

        - 열 속성을 변경할 경우 MODIFY 하부명령으로 실행
        ```
          ALTER TABLE '테이블명' MODIFY 열 정의
        ```

        - 열 이름 변경은 CHANGE 하부명령으로 실행
        ```
          ALTER TABLE '테이블명' CHANGE [기존 열 이름][신규 열 정의]
        ```

        - 열 삭제는 DROP 하부명령으로 실행
        ```
          ALTER TABLE '테이블명' DROP 열명
        ```

### 27강 제약

- NOT NULL
- Primary Key
- 외부참주(정합) 제약

  - 복수의 테이블 사이에서 정합성을 유지하기 위해 설정하는 것으로 테이블 간에는 부모 자식과 같은 관계를 가지며 정합성을 유지한다.
  - 자식 테이블 측에서는 외부키(FOREIGN KEY)를 지정해 부모 테이블을 참조한다.
  - 부모 테이블에서 참조될 열은 반드시 유일성(UNIQUE KEY, PRIMARY KEY)을 가진다.
    등등

- 제약에는 이름을 붙일 수 있다.

* 제약 이름은 CONSTRAINT 키워드를 사용하여 지정한다.

- 복수의 열로 기본키 구성하기

* a열과 b열로 기본키를 지정했을 경우 a,b열 두열 모두 중복되지 않으면 제약에 위반되지 않는다.

### 28강 인덱스 구조

- '색인'이라고도 불리는 인덱스는 데이터베이스 객체 중 하나이다.

  # 인덱스의 역할

  - 검색속도의 향상

    - 여기서 '검색'이란 SELECT 명령에 WHERE 구로 조건을 지정하고 그에 일치하는 행을 찾는 일련의 과정

  - 효율적으로 검색할 수 있는 이유
    - 인덱스의 검색 알고리즘 '이진 트리'
    * 이진 탐색
      - 이진 탐색은 차례로 나열된 집합에 대해 유효한 검색 방법이다.

### 29강 인덱스 작성과 삭제

```
  CREATE INDEX
  DROP INDEX
```

- EXPLAIN
  - 실제로 인덱스를 사용해 검색하는지를 확인할 수 있다.

* 데이터의 종류가 적으면 적을수록 인덱스의 효율이 떨어진다.
* 서로 다른 값으로 여러 종류의 데이터가 존재하면 그만큼 효율이 좋아진다.

### 30강 뷰 작성과 삭제

- 뷰는 테이블과 같은 부류의 데이터베이스 객체 중 하나이다.

```
  CREATE VIEW '뷰명' AS SELECT 명령
  DRIP VIEW '뷰명'
```

- FROM 구에 기술된 서브쿼리에 이름을 붙이고 데이터베이스 객체화하여 쓰기 쉽게 한 것을 뷰라고 한다.
- 본래 데이터베이스 객체로 등록할 수 없는 SELECT 명령을, 객체로서 이름을 붙여 관리할 수 있도록 한 것이 뷰다.
- SELECT 명령은 실행했을 때 테이블에 저장된 데이터를 결괏값으로 반환한다.
- 따라서 뷰를 참조하면 그에 정의된 SELECT 명령의 실행결과를 테이블처럼 사용할 수 있다.

* 뷰는 테이블처럼 취급할 수 있지만 '실체가 존재하지 않는다'라는 의미로 '가상 테이블'이라 불리기도 한다.
* 저장공간을 가지지 않는다.

- 뷰의 작성
  ```
  CREATE VIEW 뷰명 AS SELECT 명령
  ```
  - 뷰에서 AS 키워드는 생략할 수 없다.
- 뷰의 삭제

  ```
  DROP VIEW 뷰명
  ```

  - 뷰의 약점
    - 뷰의 근원이 되는 테이블에 보관하는 데이터양이 많은 경우, 집계처리를 할 때도 뷰가 사용된다면 처리속도가 많이 떨어질 수 밖에 없다.
    - 뷰를 중첩하여 사용하는 경우 처리 속도가 떨어지기 쉽다.
    - 뷰를 구성하는 SELECT 명령은 단독으로 실행할 수 있어야한다.
